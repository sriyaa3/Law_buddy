[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

[program:asklegal_backend]
command=/root/.venv/bin/python -m uvicorn app.main:app --host 0.0.0.0 --port 8001 --reload
directory=/app/asklegal_enhanced
autostart=true
autorestart=true
stderr_logfile=/var/log/supervisor/asklegal_backend.err.log
stdout_logfile=/var/log/supervisor/asklegal_backend.out.log
environment=PYTHONUNBUFFERED=1,PATH="/root/.venv/bin:%(ENV_PATH)s"
priority=10

[program:asklegal_frontend]
command=npm start
directory=/app/asklegal_enhanced/frontend
autostart=false
autorestart=true
stderr_logfile=/var/log/supervisor/frontend.err.log
stdout_logfile=/var/log/supervisor/frontend.out.log
environment=PORT=3000,BROWSER=none
priority=20
